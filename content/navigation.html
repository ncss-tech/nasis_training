<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Soil and Plant Science Division Staff">
<meta name="dcterms.date" content="2025-12-02">

<title>NASIS Basic Training</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #19567B;
      }
</style>


</head>

<body class="floating">

<div id="quarto-search-results"></div>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">NASIS Basic Training</h1>
            <p class="subtitle lead">Navigation</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Soil and Plant Science Division Staff </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              USDA-NRCS
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 2, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#exercise-2.1-nasis-login-and-refresh" id="toc-exercise-2.1-nasis-login-and-refresh" class="nav-link active" data-scroll-target="#exercise-2.1-nasis-login-and-refresh">Exercise 2.1 – NASIS Login and Refresh</a>
  <ul class="collapse">
  <li><a href="#open-nasis" id="toc-open-nasis" class="nav-link" data-scroll-target="#open-nasis">Open NASIS</a></li>
  <li><a href="#login" id="toc-login" class="nav-link" data-scroll-target="#login">Login</a></li>
  <li><a href="#refresh" id="toc-refresh" class="nav-link" data-scroll-target="#refresh">Refresh</a></li>
  <li><a href="#default-nasis-group" id="toc-default-nasis-group" class="nav-link" data-scroll-target="#default-nasis-group">Default NASIS Group</a></li>
  <li><a href="#upload-changes" id="toc-upload-changes" class="nav-link" data-scroll-target="#upload-changes">Upload Changes</a></li>
  </ul></li>
  <li><a href="#exercise-2.2-navigate-nasis" id="toc-exercise-2.2-navigate-nasis" class="nav-link" data-scroll-target="#exercise-2.2-navigate-nasis">Exercise 2.2 – Navigate NASIS</a>
  <ul class="collapse">
  <li><a href="#navigate-tables" id="toc-navigate-tables" class="nav-link" data-scroll-target="#navigate-tables">Navigate Tables</a></li>
  <li><a href="#customize-the-table-view" id="toc-customize-the-table-view" class="nav-link" data-scroll-target="#customize-the-table-view">Customize the Table View</a></li>
  <li><a href="#customize-the-visible-columns" id="toc-customize-the-visible-columns" class="nav-link" data-scroll-target="#customize-the-visible-columns">Customize the Visible Columns</a></li>
  <li><a href="#customize-the-toolbar" id="toc-customize-the-toolbar" class="nav-link" data-scroll-target="#customize-the-toolbar">Customize the Toolbar</a></li>
  <li><a href="#submit-screenshots" id="toc-submit-screenshots" class="nav-link" data-scroll-target="#submit-screenshots">Submit Screenshots</a></li>
  <li><a href="#restore-customizations" id="toc-restore-customizations" class="nav-link" data-scroll-target="#restore-customizations">Restore Customizations</a></li>
  </ul></li>
  <li><a href="#exercise-2.3-sort-and-filter" id="toc-exercise-2.3-sort-and-filter" class="nav-link" data-scroll-target="#exercise-2.3-sort-and-filter">Exercise 2.3 – Sort and Filter</a>
  <ul class="collapse">
  <li><a href="#sorting" id="toc-sorting" class="nav-link" data-scroll-target="#sorting">Sorting</a></li>
  <li><a href="#filtering" id="toc-filtering" class="nav-link" data-scroll-target="#filtering">Filtering</a></li>
  <li><a href="#submit-screenshots-1" id="toc-submit-screenshots-1" class="nav-link" data-scroll-target="#submit-screenshots-1">Submit Screenshots</a></li>
  <li><a href="#remove-filters-and-sorting" id="toc-remove-filters-and-sorting" class="nav-link" data-scroll-target="#remove-filters-and-sorting">Remove Filters and Sorting</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="exercise-2.1-nasis-login-and-refresh" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2.1-nasis-login-and-refresh">Exercise 2.1 – NASIS Login and Refresh</h2>
<section id="open-nasis" class="level3">
<h3 class="anchored" data-anchor-id="open-nasis">Open NASIS</h3>
<p>Start the NASIS Client by searching or browsing to it in the Windows start menu. You may want to pin the NASIS Client program to your taskbar for easy access in the future. Do this by right clicking on the icon in the taskbar after you have started the client and choosing “Pin to taskbar” from the context menu that appears.</p>
</section>
<section id="login" class="level3">
<h3 class="anchored" data-anchor-id="login">Login</h3>
<p>NASIS will attempt to do a sign in automatically if you are already using a LincPass for accessing your computer. If this is not successful you will need to select your login method and enter your password or PIN to complete the login process.</p>
</section>
<section id="refresh" class="level3">
<h3 class="anchored" data-anchor-id="refresh">Refresh</h3>
<p>The first and most important task after login to the NASIS client is the refresh process. The data you have locally on your computer is only as up to date as the last time you refreshed your data. This means any new or changed data will not be visible to you unless you initiate the refresh process. This can be done by clicking the NASIS menu and selecting Refresh Local Database.</p>
<p><img src="../images//2-1-refresh.png" title="NASIS Client NASIS menu with Refresh Local Database menu option highlighted" class="img-fluid" alt="NASIS Client NASIS menu with Refresh Local Database menu option highlighted"></p>
<p>Perform the refresh on your local database and ensure it was successful. You will see a status box appear:</p>
<p><img src="../images//2-1-refresh-steps.png" title="NASIS Client Refresh Local Database window" class="img-fluid" alt="NASIS Client Refresh Local Database window"></p>
<p>Depending on when you last refreshed your data and how many edits have been completed or new data added it may take a few minutes. This is yet another reason to refresh your data as the first thing you do, every time you start NASIS. The more often you refresh, the less data you download and the less time it will take. You should also see a status message indicating the refresh has completed.</p>
<p><img src="../images//2-1-refresh-status.png" title="NASIS Client Status Messages window" class="img-fluid" alt="NASIS Client Status Messages window"></p>
<p>Occasionally, you may find the refresh is taking an unusually long time, which can be caused by a poor connection to NASIS or because of issues with the National NASIS server. You can cancel the refresh as long as the cancel button remains on the screen, but after a certain point, the refresh can no longer be cancelled, and you must allow it to complete.</p>
</section>
<section id="default-nasis-group" class="level3">
<h3 class="anchored" data-anchor-id="default-nasis-group">Default NASIS Group</h3>
<p>If you completed the NASIS pre-course assignment, this next process should be familiar to you. Click on the NASIS menu and select “Manage User Profile”.</p>
<p><img src="../images//nasis-menu-user-screen.png" title="NASIS Client NASIS menu with the Manage User Profile... option highlighted" class="img-fluid" alt="NASIS Client NASIS menu with the Manage User Profile... option highlighted"></p>
<p>Note your current default NASIS Group and remember it. We will be using a special training group for the duration of the training, and you will need to switch back to this previous group once the training is over. Select the “Basic NASIS Training Group” from the list. If you do not see this group reach out to your mentor to confirm you have been added to the group in NASIS. It is possible your name was missed, or another name was added inadvertently.</p>
<p><img src="../images//2-1-group.png" title="NASIS Client NASIS Group choice list with Basic NASIS Training Group highlighted" class="img-fluid" alt="NASIS Client NASIS Group choice list with Basic NASIS Training Group highlighted"></p>
<p>Remember, you must also click the save button before closing the Manage User Profile window to keep any of the changes you have made.</p>
</section>
<section id="upload-changes" class="level3">
<h3 class="anchored" data-anchor-id="upload-changes">Upload Changes</h3>
<p>The final step to commit the changes you have made to your user profile is to upload all changes to the national database. Do this by selecting the “Upload All Changes to National Database” menu option.</p>
<p><img src="../images//2-1-upload.png" title="NASIS Client NASIS menu with Upload All Changes to National Database option highlighted" class="img-fluid" alt="NASIS Client NASIS menu with Upload All Changes to National Database option highlighted"></p>
<p><strong>End of Exercise</strong></p>
</section>
</section>
<section id="exercise-2.2-navigate-nasis" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2.2-navigate-nasis">Exercise 2.2 – Navigate NASIS</h2>
<section id="navigate-tables" class="level3">
<h3 class="anchored" data-anchor-id="navigate-tables">Navigate Tables</h3>
<p>Open a table in NASIS to see it in the table viewer portion of the NASIS Client. This process was covered during the course presentation. If you get stuck on this task or any other below reach out to your mentor. Choose a table (any table you like) to view.</p>
</section>
<section id="customize-the-table-view" class="level3">
<h3 class="anchored" data-anchor-id="customize-the-table-view">Customize the Table View</h3>
<p>Demonstrate the ability to customize the viewing interface by opening a second table (of your choice) and position them so they are visible side by side or top/bottom.</p>
</section>
<section id="customize-the-visible-columns" class="level3">
<h3 class="anchored" data-anchor-id="customize-the-visible-columns">Customize the Visible Columns</h3>
<p>Demonstrate the ability to customize the visibility and size of width of the columns in the table. Choose any column.</p>
</section>
<section id="customize-the-toolbar" class="level3">
<h3 class="anchored" data-anchor-id="customize-the-toolbar">Customize the Toolbar</h3>
<p>Customize the toolbar by re-arranging the button order and toolbar position. Choose any button and toolbar.</p>
</section>
<section id="submit-screenshots" class="level3">
<h3 class="anchored" data-anchor-id="submit-screenshots">Submit Screenshots</h3>
<p>Once you have completed your customizations above, capture a screenshot and write an explanation of the customizations you have completed and submit them by placing them in a new created folder with your name in the exercise submission folder on the Microsoft Teams training site.</p>
</section>
<section id="restore-customizations" class="level3">
<h3 class="anchored" data-anchor-id="restore-customizations">Restore Customizations</h3>
<p>The customizations made during the exercise can be retained or can be restored to the original settings by reversing the changes made. Do this now if you prefer to have the settings as they were previously. Also note there is an option to reset the toolbars to default to simply the process, and an option to restore table layouts to default as well.</p>
<p><strong>End of Exercise</strong></p>
</section>
</section>
<section id="exercise-2.3-sort-and-filter" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2.3-sort-and-filter">Exercise 2.3 – Sort and Filter</h2>
<section id="sorting" class="level3">
<h3 class="anchored" data-anchor-id="sorting">Sorting</h3>
<p>Open the “NASIS Site” table. Notice there are already rows of data present in this table. This table is unique, its data is already loaded into your table view by default.</p>
<p>Practice sorting the data in the columns by clicking on the column names. Notice the orientation of the triangle icon indicates whether the column is sorted in ascending (upright triangle) or descending (inverted triangle) order.</p>
<p>Practice sorting multiple columns by holding down the shift key while clicking each column to sort. Take a screenshot of your custom sort and save to send to your mentor later, then clear your sorting by right clicking a column and selecting “Clear All Sorting”</p>
</section>
<section id="filtering" class="level3">
<h3 class="anchored" data-anchor-id="filtering">Filtering</h3>
<p>Filtering data can be done several different ways. Hover over a column name to see a funnel icon appear in the right side of the column name. Clicking the funnel will open a list of unique values contained in the data. At the bottom right of the list window, click and drag near the edge where the diagonal lines are to adjust and expand the view if the text is truncated. Select an item in the list to show only those rows of data that match that value. Select multiple values if needed by checking the boxes to the left of the named values and then clicking the ok button. Alternatively, you can cancel the operation by clicking the cancel button.</p>
<p>Practice this filtering technique and take a screenshot of your filtered data and save it to send to your mentor later.</p>
<p>When a filter is active you will see a grey bar at the bottom of the table viewer providing the column name and value that is being filtered. Use the checkbox to turn the filter on or off. Clicking the inverted triangle or on the text, opens a list of previously used filters to select, which entries can be deleted by clicking the red circle with an x which appears to the right after hovering over an entry. Remove the filter completely by clicking the x button on the left. You may also choose to edit your filter by clicking the “Edit Filter” button on the right. This will open the main filter editor. Right clicking the column name will also bring up a menu where you can select this filter editor.</p>
<p>Practice adding additional filter criteria for the data using the editor. If you get stuck, ask a mentor for assistance. Take a screenshot of the filter editor with your additional filter criteria and save it to send to you mentor later.</p>
<p>Use the auto-filter row by right clicking on the column name and selecting “Show Auto Filter Row”. A new row appears at the top of the table separated by a thicker gray line. The filter operates as you type the filter criteria into the column you wish to filter. The icon at the left of each column can be clicked to select the filtering method.</p>
<p>Practice using the auto-filter row on the columns and take a screenshot of the filtered results and save to send to your mentor.</p>
</section>
<section id="submit-screenshots-1" class="level3">
<h3 class="anchored" data-anchor-id="submit-screenshots-1">Submit Screenshots</h3>
<p>Submit all your screenshots taken during the exercise by placing them in your folder in the exercise submission folder on Microsoft Teams and describe the sorting and filtering you completed.</p>
</section>
<section id="remove-filters-and-sorting" class="level3">
<h3 class="anchored" data-anchor-id="remove-filters-and-sorting">Remove Filters and Sorting</h3>
<p>Before you continue, remember the filters and sorting you have done during the exercise will be retained until you decide to change them. Remove your filters and clear all sorting to finish the exercise.</p>
<p><strong>End of Exercise</strong></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
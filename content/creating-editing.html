<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Soil and Plant Science Division Staff">
<meta name="dcterms.date" content="2025-12-02">

<title>NASIS Basic Training</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #19567B;
      }
</style>


</head>

<body class="floating">

<div id="quarto-search-results"></div>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">NASIS Basic Training</h1>
            <p class="subtitle lead">Creating and Editing Data</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Soil and Plant Science Division Staff </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              USDA-NRCS
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 2, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#exercise-4.1-check-out-data" id="toc-exercise-4.1-check-out-data" class="nav-link active" data-scroll-target="#exercise-4.1-check-out-data">Exercise 4.1 – Check Out Data</a>
  <ul class="collapse">
  <li><a href="#checking-out-data" id="toc-checking-out-data" class="nav-link" data-scroll-target="#checking-out-data">Checking Out Data</a></li>
  <li><a href="#checking-in-data" id="toc-checking-in-data" class="nav-link" data-scroll-target="#checking-in-data">Checking In Data</a></li>
  <li><a href="#submit-screenshot" id="toc-submit-screenshot" class="nav-link" data-scroll-target="#submit-screenshot">Submit Screenshot</a></li>
  </ul></li>
  <li><a href="#exercise-4.2-new-data" id="toc-exercise-4.2-new-data" class="nav-link" data-scroll-target="#exercise-4.2-new-data">Exercise 4.2 – New Data</a>
  <ul class="collapse">
  <li><a href="#creating-new-data" id="toc-creating-new-data" class="nav-link" data-scroll-target="#creating-new-data">Creating New Data</a></li>
  <li><a href="#submit-screenshot-1" id="toc-submit-screenshot-1" class="nav-link" data-scroll-target="#submit-screenshot-1">Submit Screenshot</a></li>
  </ul></li>
  <li><a href="#exercise-4.3-edit-data" id="toc-exercise-4.3-edit-data" class="nav-link" data-scroll-target="#exercise-4.3-edit-data">Exercise 4.3 – Edit Data</a>
  <ul class="collapse">
  <li><a href="#query-data" id="toc-query-data" class="nav-link" data-scroll-target="#query-data">Query Data</a></li>
  <li><a href="#copy-and-paste-data" id="toc-copy-and-paste-data" class="nav-link" data-scroll-target="#copy-and-paste-data">Copy and Paste Data</a></li>
  <li><a href="#edit-data" id="toc-edit-data" class="nav-link" data-scroll-target="#edit-data">Edit Data</a></li>
  <li><a href="#upload-changes" id="toc-upload-changes" class="nav-link" data-scroll-target="#upload-changes">Upload Changes</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="exercise-4.1-check-out-data" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4.1-check-out-data">Exercise 4.1 – Check Out Data</h2>
<section id="checking-out-data" class="level3">
<h3 class="anchored" data-anchor-id="checking-out-data">Checking Out Data</h3>
<p>Checking out data is required in order to edit data. Before we can check it out, you must have the data in your selected set. In most cases, that means running a query against the national database and against the local database. For this exercise, a temporary project has been created with the project name matching your NASIS username. Run the query “Project by project name” found in the NSSC Pangaea folder and use your NASIS username as the project name, for example “Hammerly, John”. Remember, you will need to first query the national database, accept the data and then run against local database to get it into your selected set. Now open the project table to see your project.</p>
<p><img src="../images//4-1-checkout.png" title="NASIS Client Project table with NASIS-TRAINING-1 User Project ID and Project Name highlighted" class="img-fluid" alt="NASIS Client Project table with NASIS-TRAINING-1 User Project ID and Project Name highlighted"></p>
<p>Notice the grey inactive edit buttons at bottom of the screen since I have not checked out this row those actions are not available.</p>
<p>Highlight row of the project you just loaded by clicking it, then click the check out selected trees button:</p>
<p><img src="../images//4-1-checkout-button.png" title="NASIS Client Table toolbar with Check Out Selected Trees button highlighted" class="img-fluid" alt="NASIS Client Table toolbar with Check Out Selected Trees button highlighted"></p>
<p>A letter “E” will appear in the row you checked out indicating edits can now be completed on the data</p>
<p><img src="../images//4-1-checkout-edit.png" title="NASIS Client Project table with letter E at left of NASIS-TRAINING-1 User Project ID and Project Name row that is highlighted" class="img-fluid" alt="NASIS Client Project table with letter E at left of NASIS-TRAINING-1 User Project ID and Project Name row that is highlighted"></p>
<p>The status messages window will also update indicating which record was checked out:</p>
<p><img src="../images//4-1-checkout-status.png" title="NASIS Client Status Messages window containing a message that project record ID 227403 is checked out" class="img-fluid" alt="NASIS Client Status Messages window containing a message that project record ID 227403 is checked out"></p>
<p>Take a screenshot of the row checked out and save to submit to your exercise submission folder.</p>
</section>
<section id="checking-in-data" class="level3">
<h3 class="anchored" data-anchor-id="checking-in-data">Checking In Data</h3>
<p>You can check data out and back in again as long as you did not make any changes. For this exercise we will not make changes. Check the row back in using the “Check in Selected Trees” button:</p>
<p><img src="../images//4-1-checkin.png" title="NASIS Client Table toolbar with Check In Selected Trees button highlighted" class="img-fluid" alt="NASIS Client Table toolbar with Check In Selected Trees button highlighted"></p>
</section>
<section id="submit-screenshot" class="level3">
<h3 class="anchored" data-anchor-id="submit-screenshot">Submit Screenshot</h3>
<p>Submit your screenshot by placing it in your exercise submission folder to complete the exercise.</p>
<p><strong>End of Exercise</strong></p>
</section>
</section>
<section id="exercise-4.2-new-data" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4.2-new-data">Exercise 4.2 – New Data</h2>
<section id="creating-new-data" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-data">Creating New Data</h3>
<p>New data is added by first opening a table you want to add data to for this exercise open the project table. Use green plus button at bottom left of screen to add a new row:</p>
<p><img src="../images//4-2-add-row.png" title="NASIS Client data record action buttons" class="img-fluid" alt="NASIS Client data record action buttons with the add new row button depressed"></p>
<p>Alternatively, you can use your mouse to click in a blank row, in the column you want to add data to. When creating new project, there are some data columns that are required. The columns in bold text indicate which are required. Some required data must be manually populated. Other required data will be populated with a default if not altered (examples: project approved and completed will populate unchecked).</p>
<p>There is not a visual indicator as to which column must be manually populated, but generally, the checkboxes will default all others will not. if required data is not populated, an error will appear if you end your edit before populating it with data:</p>
<p><img src="../images//4-2-error.png" title="NASIS Client Error window indicating a non-blank entry is required in User Project ID and Project Name" class="img-fluid" alt="NASIS Client Error window indicating a non-blank entry is required in User Project ID and Project Name"></p>
<p>As outlined in the message, you can choose to go back and fix the issue, or you can give up and the new row you were attempting to add will be removed.</p>
<p>Enter “NASIS-BASIC-TEMP” into the User Project ID column. For the Project Name, enter your NASIS username and add a space and type NEW after it. To finish adding the row click the green checkmark button or click on your screen away from the row.</p>
<p><img src="../images//4-2-check.png" title="NASIS Client data record action buttons with the end edit button depressed" class="img-fluid" alt="NASIS Client data record action buttons with the end edit button depressed"></p>
<p>Your new data now exists locally, but the changes have not been uploaded to the National Database. To do this click the “Upload All Changes to National Database” button:</p>
<p><img src="../images//4-2-upload-button.png" title="NASIS Client NASIS toolbar with the Upload All Changes to National Database button highlighted" class="img-fluid" alt="NASIS Client NASIS toolbar with the Upload All Changes to National Database button highlighted"></p>
<p>Finally, after completing the upload, check the data back in using the method covered in the previous exercise.</p>
</section>
<section id="submit-screenshot-1" class="level3">
<h3 class="anchored" data-anchor-id="submit-screenshot-1">Submit Screenshot</h3>
<p>Submit your screenshot by placing it in your exercise submission folder to complete the exercise.</p>
<p><strong>End of Exercise</strong></p>
</section>
</section>
<section id="exercise-4.3-edit-data" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4.3-edit-data">Exercise 4.3 – Edit Data</h2>
<section id="query-data" class="level3">
<h3 class="anchored" data-anchor-id="query-data">Query Data</h3>
<p>For this exercise we will query, copy an existing site, and then edit the copy. Use the NSSC Pangaea query “POINT – Sites by User Site ID”. Use site as your target table. Use “NASIS Training Example 1” for your User Site ID and get the results into your selected set.</p>
</section>
<section id="copy-and-paste-data" class="level3">
<h3 class="anchored" data-anchor-id="copy-and-paste-data">Copy and Paste Data</h3>
<p>Select the row in the site table you loaded into your selected set and use the copy selected rows button to copy the site:</p>
<p><img src="../images//4-3-copy-row.png" title="NASIS Client Table toolbar with the copy selected rows button highlighted" class="img-fluid" alt="NASIS Client Table toolbar with the copy selected rows button highlighted"></p>
<p>A status message will display indicating it was successfully copied.</p>
<p><img src="../images//4-3-copy-status.png" title="NASIS Client Status Messages window containing messages of when the copy selected rows command started and when the command was successfully completed" class="img-fluid" alt="NASIS Client Status Messages window containing messages of when the copy selected rows command started and when the command was successfully completed"></p>
<p>Now paste the data using the paste new rows/trees button: <img src="../images//4-3-paste.png" title="NASIS Client Tables toolbar with the Paste Rows/Trees (Inserting New Rows) button highlighted" class="img-fluid" alt="NASIS Client Tables toolbar with the Paste Rows/Trees (Inserting New Rows) button highlighted"></p>
</section>
<section id="edit-data" class="level3">
<h3 class="anchored" data-anchor-id="edit-data">Edit Data</h3>
<p>Since you made a copy of the data with the new data you pasted you can immediately start editing data. If you were to edit existing data, you would need to check it out first. Add your NASIS username to the end of the User Site ID and change the coordinate source to “unknown” notice you can only enter the choices listed, then end your edit. Then expand the site table to view the child tables. The site observation table should now be visible. Add a site observation date matching today’s date and add your name to the data collector column.</p>
</section>
<section id="upload-changes" class="level3">
<h3 class="anchored" data-anchor-id="upload-changes">Upload Changes</h3>
<p>When you have completed the data edits, upload all changes to National Database, and check the data back in. Your mentor will review the NASIS entry.</p>
<p><strong>End of Exercise</strong></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>